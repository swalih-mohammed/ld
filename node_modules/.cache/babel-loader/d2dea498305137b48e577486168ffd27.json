{"ast":null,"code":"var _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/ProductList/ProductList.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport WorkIcon from \"@material-ui/icons/Work\";\nimport BeachAccessIcon from \"@material-ui/icons/BeachAccess\";\nimport { addToCartURL, ShopProductListURL, orderItemDeleteURL, orderItemUpdateQuantityURL } from \"../../constants\";\nimport { fetchCart } from \"../../store/actions/cart\";\nimport { authAxios } from \"../../utils\";\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 140\n  },\n  loading: {\n    display: \"flex\",\n    \"& > * + *\": {\n      marginLeft: theme.spacing(20)\n    }\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8)\n  },\n  card: {\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  cardMedia: {\n    paddingTop: \"56.25%\" // 16:9\n\n  },\n  cardContent: {\n    flexGrow: 1\n  }\n});\n\nclass ProductList extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      error: null,\n      data: [],\n      formData: {}\n    };\n\n    this.handleToggleForm = () => {\n      const {\n        formVisible\n      } = this.state;\n      this.setState({\n        formVisible: !formVisible\n      });\n    };\n\n    this.handleFormatData = formData => {\n      // convert {colour: 1, size: 2} to [1,2] - they're all variations\n      return Object.keys(formData).map(key => {\n        return formData[key];\n      });\n    };\n\n    this.handleAddToCart = (slug, shop, place) => {\n      this.setState({\n        loading: true\n      });\n      const {\n        formData\n      } = this.state;\n      const variations = this.handleFormatData(formData);\n      authAxios.post(addToCartURL, {\n        place,\n        shop,\n        slug,\n        variations\n      }).then(res => {\n        this.props.refreshCart();\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n      console.log(data);\n    };\n\n    this.renderVariations = orderItem => {\n      let text = \"\";\n      orderItem.item_variations.forEach(iv => {\n        text += `${iv.variation.name}: ${iv.value}, `;\n      });\n      return text;\n    };\n\n    this.handleRemoveQuantityFromCart = slug => {\n      authAxios.post(orderItemUpdateQuantityURL, {\n        slug\n      }).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleRemoveItem = itemID => {\n      authAxios.delete(orderItemDeleteURL(itemID)).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleChange = (e, {\n      name,\n      value\n    }) => {\n      const {\n        formData\n      } = this.state;\n      const updatedFormData = { ...formData,\n        [name]: value\n      };\n      this.setState({\n        formData: updatedFormData\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n    this.setState({\n      loading: true\n    });\n    axios.get(ShopProductListURL(params.shopID)).then(res => {\n      this.setState({\n        data: res.data,\n        loading: false\n      });\n    }).catch(err => {\n      this.setState({\n        error: err,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      formData,\n      formVisible,\n      loading\n    } = this.state;\n    const item = data;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      className: classes.cardGrid,\n      maxWidth: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(CircularProgress, {\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    })), error && /*#__PURE__*/React.createElement(Alert, {\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, JSON.stringify(error)), \"This is an error alert \\u2014 \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 40\n      }\n    }, \"check it out!\")), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      maxWidth: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }, data.map(card => /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      key: card,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CardMedia, {\n      style: {\n        height: 0,\n        paddingTop: \"56%\"\n      },\n      className: classes.cardMedia,\n      image: card.image,\n      title: \"Image title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(CardContent, {\n      className: classes.cardContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, card.title), /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, card.category)), /*#__PURE__*/React.createElement(CardActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => this.handleAddToCart(card.slug, card.shop),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, \"Add to cart\"))), data.variations && data.variations.map(v => {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(List, {\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(ImageIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(ListItemText, {\n        primary: \"Photos\",\n        secondary: \"Jan 9, 2014\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 29\n        }\n      }))));\n    }))))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(withStyles(styles)(ProductList));","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/ProductList/ProductList.js"],"names":["React","connect","axios","Alert","AlertTitle","makeStyles","withStyles","createMuiTheme","Card","CardActionArea","CardActions","CardContent","CardMedia","Button","Typography","CircularProgress","CameraIcon","CssBaseline","Grid","Toolbar","Container","Link","List","ListItem","ListItemText","ListItemAvatar","Avatar","ImageIcon","WorkIcon","BeachAccessIcon","addToCartURL","ShopProductListURL","orderItemDeleteURL","orderItemUpdateQuantityURL","fetchCart","authAxios","styles","theme","root","maxWidth","media","height","loading","display","marginLeft","spacing","cardGrid","paddingTop","paddingBottom","card","width","flexDirection","cardMedia","cardContent","flexGrow","ProductList","Component","state","error","data","formData","handleToggleForm","formVisible","setState","handleFormatData","Object","keys","map","key","handleAddToCart","slug","shop","place","variations","post","then","res","props","refreshCart","catch","err","console","log","renderVariations","orderItem","text","item_variations","forEach","iv","variation","name","value","handleRemoveQuantityFromCart","handleFetchOrder","handleRemoveItem","itemID","delete","handleChange","e","updatedFormData","componentDidMount","match","params","get","shopID","render","item","classes","JSON","stringify","image","title","category","v","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport WorkIcon from \"@material-ui/icons/Work\";\nimport BeachAccessIcon from \"@material-ui/icons/BeachAccess\";\n\nimport {\n  addToCartURL,\n  ShopProductListURL,\n  orderItemDeleteURL,\n  orderItemUpdateQuantityURL\n} from \"../../constants\";\nimport { fetchCart } from \"../../store/actions/cart\";\nimport { authAxios } from \"../../utils\";\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 345\n  },\n  media: {\n    height: 140\n  },\n  loading: {\n    display: \"flex\",\n    \"& > * + *\": {\n      marginLeft: theme.spacing(20)\n    }\n  },\n\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8)\n  },\n  card: {\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  cardMedia: {\n    paddingTop: \"56.25%\" // 16:9\n  },\n  cardContent: {\n    flexGrow: 1\n  }\n});\n\nclass ProductList extends React.Component {\n  state = {\n    loading: false,\n    error: null,\n    data: [],\n    formData: {}\n  };\n\n  componentDidMount() {\n    const {\n      match: { params }\n    } = this.props;\n    this.setState({ loading: true });\n    axios\n      .get(ShopProductListURL(params.shopID))\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  }\n\n  handleToggleForm = () => {\n    const { formVisible } = this.state;\n    this.setState({\n      formVisible: !formVisible\n    });\n  };\n\n  handleFormatData = formData => {\n    // convert {colour: 1, size: 2} to [1,2] - they're all variations\n    return Object.keys(formData).map(key => {\n      return formData[key];\n    });\n  };\n\n  handleAddToCart = (slug, shop, place) => {\n    this.setState({ loading: true });\n    const { formData } = this.state;\n    const variations = this.handleFormatData(formData);\n    authAxios\n      .post(addToCartURL, { place, shop, slug, variations })\n      .then(res => {\n        this.props.refreshCart();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n    console.log(data);\n  };\n\n  renderVariations = orderItem => {\n    let text = \"\";\n    orderItem.item_variations.forEach(iv => {\n      text += `${iv.variation.name}: ${iv.value}, `;\n    });\n    return text;\n  };\n\n  handleRemoveQuantityFromCart = slug => {\n    authAxios\n      .post(orderItemUpdateQuantityURL, { slug })\n      .then(res => {\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleRemoveItem = itemID => {\n    authAxios\n      .delete(orderItemDeleteURL(itemID))\n      .then(res => {\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleChange = (e, { name, value }) => {\n    const { formData } = this.state;\n    const updatedFormData = {\n      ...formData,\n      [name]: value\n    };\n    this.setState({ formData: updatedFormData });\n  };\n\n  render() {\n    const { data, error, formData, formVisible, loading } = this.state;\n    const item = data;\n    const { classes } = this.props;\n\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <Container className={classes.cardGrid} maxWidth=\"md\">\n          {loading && (\n            <div className={classes.loading}>\n              <CircularProgress />\n              <CircularProgress color=\"secondary\" />\n            </div>\n          )}\n          {error && (\n            <Alert severity=\"error\">\n              <AlertTitle>{JSON.stringify(error)}</AlertTitle>\n              This is an error alert â€” <strong>check it out!</strong>\n            </Alert>\n          )}\n          <Grid container spacing={4} maxWidth=\"md\">\n            {data.map(card => (\n              <Grid item key={card} xs={12} sm={6} md={4}>\n                <Card className={classes.card}>\n                  <CardMedia\n                    style={{ height: 0, paddingTop: \"56%\" }}\n                    className={classes.cardMedia}\n                    image={card.image}\n                    title=\"Image title\"\n                  />\n                  <CardContent className={classes.cardContent}>\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                      {card.title}\n                    </Typography>\n                    <Typography>{card.category}</Typography>\n                  </CardContent>\n                  <CardActions>\n                    <Button\n                      size=\"small\"\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => this.handleAddToCart(card.slug, card.shop)}\n                    >\n                      Add to cart\n                    </Button>\n                  </CardActions>\n                </Card>\n                {data.variations &&\n                  data.variations.map(v => {\n                    return (\n                      <React.Fragment>\n                        <List className={classes.root}>\n                          <ListItem>\n                            <ListItemAvatar>\n                              <Avatar>\n                                <ImageIcon />\n                              </Avatar>\n                            </ListItemAvatar>\n                            <ListItemText\n                              primary=\"Photos\"\n                              secondary=\"Jan 9, 2014\"\n                            />\n                          </ListItem>\n                        </List>\n                      </React.Fragment>\n                    );\n                  })}\n              </Grid>\n            ))}\n          </Grid>\n        </Container>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(withStyles(styles)(ProductList));\n"]},"metadata":{},"sourceType":"module"}