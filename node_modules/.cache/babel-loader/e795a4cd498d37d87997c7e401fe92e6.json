{"ast":null,"code":"var _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/OrderSummary/OrderSummary.js\";\nimport React, { Component } from \"react\";\nimport { Button, Container, Dimmer, Divider, Form, Header, Image, Item, Label, Loader, Message, Segment, Select, Radio } from \"semantic-ui-react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { authAxios } from \"../utils\";\nimport { checkoutURL, orderSummaryURL, addCouponURL, addressListURL } from \"../constants\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  appBar: {\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n      marginBottom: theme.spacing(10)\n    })\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  hide: {\n    display: \"none\"\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  drawerHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: \"flex-end\"\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    marginLeft: -drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  },\n  rightIcons: {\n    marginLeft: \"auto\"\n  }\n}));\n\nconst OrderPreview = props => {\n  const {\n    data\n  } = props;\n  const classes = useStyles();\n  const theme = useTheme();\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, data && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    size: \"small\",\n    \"aria-label\": \"a dense table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }, \"Item\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, \"Quanitty\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, \"Price\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, cart !== null ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, cart.order_items.map(order_item => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: order_item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 27\n      }\n    }, order_item.item.title), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 27\n      }\n    }, order_item.quantity), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 27\n      }\n    }, order_item.final_price));\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"No Item in your cart\"))))));\n};\n\nclass CouponForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      code: \"\"\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        code: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      const {\n        code\n      } = this.state;\n      this.props.handleAddCoupon(e, code);\n      this.setState({\n        code: \"\"\n      });\n    };\n  }\n\n  render() {\n    const {\n      code\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, \"Coupon code\"), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Enter a coupon..\",\n      value: code,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, \"Submit\"))));\n  }\n\n}\n\nclass CheckoutForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      loading: false,\n      error: null,\n      success: false,\n      shippingAddresses: [],\n      billingAddresses: [],\n      selectedBillingAddress: \"\",\n      selectedShippingAddress: \"\",\n      shop: \"\",\n      place: \"\",\n      mode_of_payment: \"\"\n    };\n\n    this.handleGetDefaultAddress = addresses => {\n      const filteredAddresses = addresses.filter(el => el.default === true);\n\n      if (filteredAddresses.length > 0) {\n        return filteredAddresses[0].id;\n      }\n\n      return \"\";\n    };\n\n    this.handleFetchBillingAddresses = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(addressListURL(\"B\")).then(res => {\n        this.setState({\n          billingAddresses: res.data.map(a => {\n            return {\n              key: a.id,\n              text: `${a.place}, ${a.area}, ${a.road_name}`,\n              value: a.id\n            };\n          }),\n          selectedBillingAddress: this.handleGetDefaultAddress(res.data),\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.handleFetchShippingAddresses = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(addressListURL(\"S\")).then(res => {\n        this.setState({\n          shippingAddresses: res.data.map(a => {\n            return {\n              key: a.id,\n              text: `${a.place}, ${a.area}, ${a.road_name}`,\n              value: a.id\n            };\n          }),\n          selectedShippingAddress: this.handleGetDefaultAddress(res.data),\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.handleFetchOrder = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(orderSummaryURL).then(res => {\n        this.setState({\n          data: res.data,\n          loading: false\n        });\n      }).catch(err => {\n        if (err.response.status === 404) {\n          this.props.history.push(\"/dashboard\");\n        } else {\n          this.setState({\n            error: err,\n            loading: false\n          });\n        }\n      });\n    };\n\n    this.handleAddCoupon = (e, code) => {\n      e.preventDefault();\n      this.setState({\n        loading: true\n      });\n      authAxios.post(addCouponURL, {\n        code\n      }).then(res => {\n        this.setState({\n          loading: false\n        });\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.handleSelectChange = (e, {\n      name,\n      value\n    }) => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.submit = ev => {\n      ev.preventDefault();\n      this.setState({\n        loading: true\n      });\n      const {\n        selectedBillingAddress,\n        selectedShippingAddress,\n        mode_of_payment\n      } = this.state;\n      authAxios.post(checkoutURL, {\n        selectedBillingAddress,\n        selectedShippingAddress,\n        mode_of_payment\n      }).then(res => {\n        this.setState({\n          loading: false,\n          success: true\n        });\n      }).catch(err => {\n        this.setState({\n          loading: false,\n          error: err\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchOrder();\n    this.handleFetchBillingAddresses();\n    this.handleFetchShippingAddresses();\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      loading,\n      success,\n      billingAddresses,\n      shippingAddresses,\n      selectedBillingAddress,\n      selectedShippingAddress,\n      mode_of_payment\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 7\n      }\n    }, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CircularProgress, {\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 13\n      }\n    })), error && /*#__PURE__*/React.createElement(Alert, {\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 13\n      }\n    }, JSON.stringify(error)), \"This is an error alert \\u2014 \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 38\n      }\n    }, \"check it out!\")));\n  }\n\n}\n\nexport default CheckoutForm;","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/OrderSummary/OrderSummary.js"],"names":["React","Component","Button","Container","Dimmer","Divider","Form","Header","Image","Item","Label","Loader","Message","Segment","Select","Radio","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Link","withRouter","authAxios","checkoutURL","orderSummaryURL","addCouponURL","addressListURL","useStyles","makeStyles","theme","root","display","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","marginBottom","spacing","menuButton","marginRight","appBarShift","width","drawerWidth","marginLeft","easeOut","enteringScreen","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","padding","mixins","toolbar","justifyContent","content","flexGrow","contentShift","rightIcons","OrderPreview","props","data","classes","useTheme","table","cart","order_items","map","order_item","id","item","title","quantity","final_price","CouponForm","state","code","handleChange","e","setState","target","value","handleSubmit","handleAddCoupon","render","CheckoutForm","loading","error","success","shippingAddresses","billingAddresses","selectedBillingAddress","selectedShippingAddress","shop","place","mode_of_payment","handleGetDefaultAddress","addresses","filteredAddresses","filter","el","default","length","handleFetchBillingAddresses","get","then","res","a","key","text","area","road_name","catch","err","handleFetchShippingAddresses","handleFetchOrder","response","status","history","push","preventDefault","post","handleSelectChange","name","submit","ev","componentDidMount","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Button,\n  Container,\n  Dimmer,\n  Divider,\n  Form,\n  Header,\n  Image,\n  Item,\n  Label,\n  Loader,\n  Message,\n  Segment,\n  Select,\n  Radio\n} from \"semantic-ui-react\";\n\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport { Link, withRouter } from \"react-router-dom\";\nimport { authAxios } from \"../utils\";\nimport {\n  checkoutURL,\n  orderSummaryURL,\n  addCouponURL,\n  addressListURL\n} from \"../constants\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  appBar: {\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n      marginBottom: theme.spacing(10)\n    })\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  hide: {\n    display: \"none\"\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0\n  },\n  drawerPaper: {\n    width: drawerWidth\n  },\n  drawerHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: \"flex-end\"\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    marginLeft: -drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginLeft: 0\n  },\n  rightIcons: {\n    marginLeft: \"auto\"\n  }\n}));\n\nconst OrderPreview = props => {\n  const { data } = props;\n  const classes = useStyles();\n  const theme = useTheme();\n  return (\n    <React.Fragment>\n      {data && (\n        <React.Fragment>\n          <TableContainer component={Paper}>\n            <Table\n              className={classes.table}\n              size=\"small\"\n              aria-label=\"a dense table\"\n            >\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"right\">Item</TableCell>\n                  <TableCell align=\"right\">Quanitty</TableCell>\n                  <TableCell align=\"right\">Price</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {cart !== null ? (\n                  <React.Fragment>\n                    {cart.order_items.map(order_item => {\n                      return (\n                        <TableRow key={order_item.id}>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {order_item.item.title}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {order_item.quantity}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {order_item.final_price}\n                          </TableCell>\n                        </TableRow>\n                      );\n                    })}\n                  </React.Fragment>\n                ) : (\n                  <div>No Item in your cart</div>\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n};\n\nclass CouponForm extends Component {\n  state = {\n    code: \"\"\n  };\n\n  handleChange = e => {\n    this.setState({\n      code: e.target.value\n    });\n  };\n\n  handleSubmit = e => {\n    const { code } = this.state;\n    this.props.handleAddCoupon(e, code);\n    this.setState({ code: \"\" });\n  };\n\n  render() {\n    const { code } = this.state;\n    return (\n      <React.Fragment>\n        <Container>\n          <Form onSubmit={this.handleSubmit}>\n            <Form.Field>\n              <label>Coupon code</label>\n              <input\n                placeholder=\"Enter a coupon..\"\n                value={code}\n                onChange={this.handleChange}\n              />\n            </Form.Field>\n            <Button type=\"submit\">Submit</Button>\n          </Form>\n        </Container>\n      </React.Fragment>\n    );\n  }\n}\n\nclass CheckoutForm extends Component {\n  state = {\n    data: null,\n    loading: false,\n    error: null,\n    success: false,\n    shippingAddresses: [],\n    billingAddresses: [],\n    selectedBillingAddress: \"\",\n    selectedShippingAddress: \"\",\n    shop: \"\",\n    place: \"\",\n    mode_of_payment: \"\"\n  };\n\n  componentDidMount() {\n    this.handleFetchOrder();\n    this.handleFetchBillingAddresses();\n    this.handleFetchShippingAddresses();\n  }\n\n  handleGetDefaultAddress = addresses => {\n    const filteredAddresses = addresses.filter(el => el.default === true);\n    if (filteredAddresses.length > 0) {\n      return filteredAddresses[0].id;\n    }\n    return \"\";\n  };\n\n  handleFetchBillingAddresses = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(addressListURL(\"B\"))\n      .then(res => {\n        this.setState({\n          billingAddresses: res.data.map(a => {\n            return {\n              key: a.id,\n              text: `${a.place}, ${a.area}, ${a.road_name}`,\n              value: a.id\n            };\n          }),\n          selectedBillingAddress: this.handleGetDefaultAddress(res.data),\n          loading: false\n        });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  handleFetchShippingAddresses = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(addressListURL(\"S\"))\n      .then(res => {\n        this.setState({\n          shippingAddresses: res.data.map(a => {\n            return {\n              key: a.id,\n              text: `${a.place}, ${a.area}, ${a.road_name}`,\n              value: a.id\n            };\n          }),\n          selectedShippingAddress: this.handleGetDefaultAddress(res.data),\n\n          loading: false\n        });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  handleFetchOrder = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(orderSummaryURL)\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n      })\n      .catch(err => {\n        if (err.response.status === 404) {\n          this.props.history.push(\"/dashboard\");\n        } else {\n          this.setState({ error: err, loading: false });\n        }\n      });\n  };\n\n  handleAddCoupon = (e, code) => {\n    e.preventDefault();\n    this.setState({ loading: true });\n    authAxios\n      .post(addCouponURL, { code })\n      .then(res => {\n        this.setState({ loading: false });\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  handleSelectChange = (e, { name, value }) => {\n    this.setState({ [name]: value });\n  };\n\n  submit = ev => {\n    ev.preventDefault();\n    this.setState({ loading: true });\n    const {\n      selectedBillingAddress,\n      selectedShippingAddress,\n      mode_of_payment\n    } = this.state;\n    authAxios\n      .post(checkoutURL, {\n        selectedBillingAddress,\n        selectedShippingAddress,\n        mode_of_payment\n      })\n      .then(res => {\n        this.setState({ loading: false, success: true });\n      })\n      .catch(err => {\n        this.setState({ loading: false, error: err });\n      });\n  };\n\n  render() {\n    const {\n      data,\n      error,\n      loading,\n      success,\n      billingAddresses,\n      shippingAddresses,\n      selectedBillingAddress,\n      selectedShippingAddress,\n      mode_of_payment\n    } = this.state;\n\n    return (\n      <div>\n        {loading && (\n          <div className={classes.loading}>\n            <CircularProgress />\n            <CircularProgress color=\"secondary\" />\n          </div>\n        )}\n        {error && (\n          <Alert severity=\"error\">\n            <AlertTitle>{JSON.stringify(error)}</AlertTitle>\n            This is an error alert â€” <strong>check it out!</strong>\n          </Alert>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default CheckoutForm;\n"]},"metadata":{},"sourceType":"module"}