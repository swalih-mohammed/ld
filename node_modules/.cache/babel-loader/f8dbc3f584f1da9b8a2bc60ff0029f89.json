{"ast":null,"code":"var _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/Orders/Orders.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\nimport KeyboardArrowUpIcon from \"@material-ui/icons/KeyboardArrowUp\";\nimport { userIDURL, userTypeURL, orderListURL } from \"../../constants\";\nimport { authAxios } from \"../../utils\";\nconst useRowStyles = makeStyles({\n  root: {\n    \"& > *\": {\n      borderBottom: \"unset\"\n    }\n  }\n});\n\nfunction Row(props) {\n  const {\n    order\n  } = props; //   const { orders } = props;\n\n  const [open, setOpen] = React.useState(false);\n  const classes = useRowStyles();\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"expand row\",\n    size: \"small\",\n    onClick: () => setOpen(!open),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, open ? /*#__PURE__*/React.createElement(KeyboardArrowUpIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(KeyboardArrowDownIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 47\n    }\n  }))), /*#__PURE__*/React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, order.shop_name), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, order.total), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, order.start_date), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, order.order_status)), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    style: {\n      paddingBottom: 0,\n      paddingTop: 0\n    },\n    colSpan: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    in: open,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    margin: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    component: \"div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, \"History\"), /*#__PURE__*/React.createElement(Table, {\n    size: \"small\",\n    \"aria-label\": \"purchases\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \"Item\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, \"Quantity\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"Total price\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, order.order_items.map(order_item => /*#__PURE__*/React.createElement(TableRow, {\n    key: order_item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 23\n    }\n  }, order_item.item.title), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 23\n    }\n  }, order_item.quantity), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 23\n    }\n  }, order_item.final_price))))))))));\n}\n\nfunction CollapsibleTable(props) {\n  const {\n    orders\n  } = props;\n  const {\n    UserType\n  } = props;\n  return /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    style: {\n      maxWidth: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    \"aria-label\": \"collapsible table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, \"Shop Name\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, \"Total Amount\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"Order Status\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, orders.map(order => /*#__PURE__*/React.createElement(Row, {\n    key: order.id,\n    order: order,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  })))));\n}\n\nclass Orders extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      orders: [],\n      userID: null,\n      UserType: null\n    };\n\n    this.handleFetchUserID = () => {\n      authAxios.get(userIDURL).then(res => {\n        this.setState({\n          userID: res.data.userID\n        });\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleFetchUserType = () => {\n      authAxios.get(userTypeURL).then(res => {\n        this.setState({\n          UserType: res.data.UserType\n        });\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleFetchOrders = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(orderListURL).then(res => {\n        this.setState({\n          loading: false,\n          orders: res.data\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchOrders();\n    this.handleFetchUserID();\n    this.handleFetchUserType();\n  }\n\n  render() {\n    const {\n      orders\n    } = this.state;\n    const {\n      userID\n    } = this.state;\n    const {\n      UserType\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CollapsibleTable, {\n      orders: orders,\n      UserType: UserType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nexport default connect(mapStateToProps)(Orders);","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/Orders/Orders.js"],"names":["React","PropTypes","connect","makeStyles","Box","Collapse","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Typography","Paper","KeyboardArrowDownIcon","KeyboardArrowUpIcon","userIDURL","userTypeURL","orderListURL","authAxios","useRowStyles","root","borderBottom","Row","props","order","open","setOpen","useState","classes","shop_name","total","start_date","order_status","paddingBottom","paddingTop","order_items","map","order_item","id","item","title","quantity","final_price","CollapsibleTable","orders","UserType","maxWidth","Orders","Component","state","userID","handleFetchUserID","get","then","res","setState","data","catch","err","error","handleFetchUserType","handleFetchOrders","loading","componentDidMount","render","mapStateToProps","isAuthenticated","auth","token"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\nimport KeyboardArrowUpIcon from \"@material-ui/icons/KeyboardArrowUp\";\n\nimport { userIDURL, userTypeURL, orderListURL } from \"../../constants\";\n\nimport { authAxios } from \"../../utils\";\nconst useRowStyles = makeStyles({\n  root: {\n    \"& > *\": {\n      borderBottom: \"unset\"\n    }\n  }\n});\n\nfunction Row(props) {\n  const { order } = props;\n  //   const { orders } = props;\n  const [open, setOpen] = React.useState(false);\n  const classes = useRowStyles();\n\n  return (\n    <React.Fragment>\n      <TableRow className={classes.root}>\n        <TableCell>\n          <IconButton\n            aria-label=\"expand row\"\n            size=\"small\"\n            onClick={() => setOpen(!open)}\n          >\n            {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n          </IconButton>\n        </TableCell>\n        <TableCell component=\"th\" scope=\"row\">\n          {order.shop_name}\n        </TableCell>\n        {/* <TableCell align=\"right\">{order.shop_name}</TableCell> */}\n        <TableCell align=\"right\">{order.total}</TableCell>\n        <TableCell align=\"right\">{order.start_date}</TableCell>\n        <TableCell align=\"right\">{order.order_status}</TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n          <Collapse in={open} timeout=\"auto\" unmountOnExit>\n            <Box margin={1}>\n              <Typography variant=\"h6\" gutterBottom component=\"div\">\n                History\n              </Typography>\n              <Table size=\"small\" aria-label=\"purchases\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Item</TableCell>\n\n                    <TableCell align=\"right\">Quantity</TableCell>\n                    <TableCell align=\"right\">Total price</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {order.order_items.map(order_item => (\n                    <TableRow key={order_item.id}>\n                      <TableCell component=\"th\" scope=\"row\">\n                        {order_item.item.title}\n                      </TableCell>\n\n                      <TableCell align=\"right\">{order_item.quantity}</TableCell>\n                      <TableCell align=\"right\">\n                        {order_item.final_price}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </Box>\n          </Collapse>\n        </TableCell>\n      </TableRow>\n    </React.Fragment>\n  );\n}\n\nfunction CollapsibleTable(props) {\n  const { orders } = props;\n  const { UserType } = props;\n\n  return (\n    <TableContainer component={Paper} style={{ maxWidth: \"100%\" }}>\n      <Table aria-label=\"collapsible table\">\n        <TableHead>\n          <TableRow>\n            <TableCell />\n            {/* <TableCell>{UserType}</TableCell> */}\n            <TableCell align=\"right\">Shop Name</TableCell>\n            <TableCell align=\"right\">Total Amount</TableCell>\n            <TableCell align=\"right\">Date</TableCell>\n            <TableCell align=\"right\">Order Status</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {orders.map(order => (\n            <Row key={order.id} order={order} />\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nclass Orders extends React.Component {\n  state = {\n    orders: [],\n    userID: null,\n    UserType: null\n  };\n\n  componentDidMount() {\n    this.handleFetchOrders();\n    this.handleFetchUserID();\n    this.handleFetchUserType();\n  }\n\n  handleFetchUserID = () => {\n    authAxios\n      .get(userIDURL)\n      .then(res => {\n        this.setState({ userID: res.data.userID });\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleFetchUserType = () => {\n    authAxios\n      .get(userTypeURL)\n      .then(res => {\n        this.setState({ UserType: res.data.UserType });\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleFetchOrders = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(orderListURL)\n      .then(res => {\n        this.setState({\n          loading: false,\n          orders: res.data\n        });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  render() {\n    const { orders } = this.state;\n    const { userID } = this.state;\n    const { UserType } = this.state;\n\n    return (\n      <div>\n        <CollapsibleTable orders={orders} UserType={UserType} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nexport default connect(mapStateToProps)(Orders);\n"]},"metadata":{},"sourceType":"module"}